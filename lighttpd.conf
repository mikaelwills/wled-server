# lighttpd configuration for WLED Frontend

# Server settings
server.document-root = "/etc/wled-server/frontend/build"
server.port = 3011
server.bind = "0.0.0.0"

# Modules to load
server.modules = (
    "mod_rewrite",
    "mod_staticfile"
)

# MIME type mapping for static files
mimetype.assign = (
    ".html" => "text/html",
    ".css" => "text/css",
    ".js" => "application/javascript",
    ".json" => "application/json",
    ".png" => "image/png",
    ".jpg" => "image/jpeg",
    ".svg" => "image/svg+xml"
)

# Logging
accesslog.filename = "/var/log/lighttpd/access.log"
server.errorlog = "/var/log/lighttpd/error.log"

# SPA Fallback for SvelteKit routing
# If a requested file is not found, serve /index.html instead.
# This allows the frontend router to handle the path.
url.rewrite-if-not-file = (
  "^/.*" => "/index.html"
)
